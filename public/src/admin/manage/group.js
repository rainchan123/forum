"use strict";define("admin/manage/group",["forum/groups/memberlist","iconSelect","translator","categorySelector","groupSearch","slugify","api"],function(a,e,n,r,o,i,t){var u={};u.init=function(){var n=$("#group-icon");var u=$("#change-group-user-title");var p=$("#change-group-label-color");var l=$("#change-group-text-color");var g=$("#group-label-preview");var f=$("#group-label-preview-text");var d=ajaxify.data.group.name;$("#group-selector").on("change",function(){ajaxify.go("admin/manage/groups/"+$(this).val()+window.location.hash)});a.init("admin/manage/group");u.on("keyup",function(){f.translateText(u.val())});p.on("keyup input",function(){g.css("background-color",p.val()||"#000000")});l.on("keyup input",function(){g.css("color",l.val()||"#ffffff")});s();$("#group-icon, #group-icon-label").on("click",function(){var a=n.attr("value");e.init(n,function(){var e=n.attr("value");if(e===a){return}if(e==="fa-nbb-none"){e="hidden"}$("#group-icon-preview").attr("class","fa fa-fw "+(e||"hidden"));app.flags=app.flags||{};app.flags._unsaved=true})});r.init($('[component="category-selector"]'),function(a){c(a.cid)});o.init($('[component="group-selector"]'));$("form [data-property]").on("change",function(){app.flags=app.flags||{};app.flags._unsaved=true});$("#save").on("click",function(){t.put(`/groups/${i(d)}`,{name:$("#change-group-name").val(),userTitle:u.val(),description:$("#change-group-desc").val(),icon:n.attr("value"),labelColor:p.val(),textColor:l.val(),userTitleEnabled:$("#group-userTitleEnabled").is(":checked"),private:$("#group-private").is(":checked"),hidden:$("#group-hidden").is(":checked"),memberPostCids:$("#memberPostCids").val(),disableJoinRequests:$("#group-disableJoinRequests").is(":checked"),disableLeave:$("#group-disableLeave").is(":checked")}).then(()=>{var a=$("#change-group-name").val();if(d!==a){ajaxify.go("admin/manage/groups/"+encodeURIComponent(a),undefined,true)}app.alertSuccess("[[admin/manage/groups:edit.save-success]]")}).catch(app.alertError);return false})};function s(){$('[component="groups/members"]').on("click","[data-action]",function(){var a=$(this);var e=a.parents("[data-uid]");var n=e.find(".member-name .user-owner-icon");var r=!n.hasClass("invisible");var o=e.attr("data-uid");var i=a.attr("data-action");switch(i){case"toggleOwnership":t[r?"del":"put"](`/groups/${ajaxify.data.group.slug}/ownership/${o}`,{}).then(()=>{n.toggleClass("invisible")}).catch(app.alertError);break;case"kick":bootbox.confirm("[[admin/manage/groups:edit.confirm-remove-user]]",function(a){if(!a){return}t.del("/groups/"+ajaxify.data.group.slug+"/membership/"+o).then(()=>{e.slideUp().remove()}).catch(app.alertError)});break;default:break}})}function c(a){if(a){var e="admin/manage/privileges/"+a+"?group="+ajaxify.data.group.nameEncoded;if(app.flags&&app.flags._unsaved===true){n.translate("[[global:unsaved-changes]]",function(a){bootbox.confirm(a,function(a){if(a){app.flags._unsaved=false;ajaxify.go(e)}})});return}ajaxify.go(e)}}return u});
//# sourceMappingURL=group.js.map