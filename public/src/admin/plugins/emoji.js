define(["jquery","api","emoji","translator"],function(t,e,n,i){"use strict";function l(t){return t&&typeof t==="object"&&"default"in t?t:{default:t}}var s=l(t);var o=l(e);var r=ajaxify;function a(){}function c(t,e){for(const n in e)t[n]=e[n];return t}function f(t){return t&&typeof t==="object"&&typeof t.then==="function"}function u(t){return t()}function d(){return Object.create(null)}function m(t){t.forEach(u)}function p(t){return typeof t==="function"}function g(t,e){return t!=t?e==e:t!==e||(t&&typeof t==="object"||typeof t==="function")}function h(t){return Object.keys(t).length===0}function $(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function v(t,e){for(let n=0;n<t.length;n+=1){if(t[n])t[n].d(e)}}function j(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function x(){return k(" ")}function w(){return k("")}function A(t,e,n,i){t.addEventListener(e,n,i);return()=>t.removeEventListener(e,n,i)}function I(t,e,n){if(n==null)t.removeAttribute(e);else if(t.getAttribute(e)!==n)t.setAttribute(e,n)}function E(t){return Array.from(t.childNodes)}function N(t,e){e=""+e;if(t.wholeText!==e)t.data=e}function M(t,e){t.value=e==null?"":e}function _(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function T(t,e,n){t.classList[n?"add":"remove"](e)}function L(t,e){const n=document.createEvent("CustomEvent");n.initCustomEvent(t,false,false,e);return n}class C{constructor(t=null){this.a=t;this.e=this.n=null}m(t,e,n=null){if(!this.e){this.e=j(e.nodeName);this.t=e;this.h(t)}this.i(n)}h(t){this.e.innerHTML=t;this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1){b(this.t,this.n[e],t)}}p(t){this.d();this.h(t);this.i(this.a)}d(){this.n.forEach(y)}}let O;function H(t){O=t}function q(){if(!O)throw new Error("Function called outside component initialization");return O}function z(t){q().$$.on_mount.push(t)}function R(){const t=q();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const l=L(e,n);i.slice().forEach(e=>{e.call(t,l)})}}}const S=[];const F=[];const B=[];const P=[];const Q=Promise.resolve();let U=false;function Y(){if(!U){U=true;Q.then(K)}}function D(t){B.push(t)}function W(t){P.push(t)}let G=false;const J=new Set;function K(){if(G)return;G=true;do{for(let t=0;t<S.length;t+=1){const e=S[t];H(e);V(e.$$)}H(null);S.length=0;while(F.length)F.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];if(!J.has(e)){J.add(e);e()}}B.length=0}while(S.length);while(P.length){P.pop()()}U=false;G=false;J.clear()}function V(t){if(t.fragment!==null){t.update();m(t.before_update);const e=t.dirty;t.dirty=[-1];t.fragment&&t.fragment.p(t.ctx,e);t.after_update.forEach(D)}}const X=new Set;let Z;function tt(){Z={r:0,c:[],p:Z}}function et(){if(!Z.r){m(Z.c)}Z=Z.p}function nt(t,e){if(t&&t.i){X.delete(t);t.i(e)}}function it(t,e,n,i){if(t&&t.o){if(X.has(t))return;X.add(t);Z.c.push(()=>{X.delete(t);if(i){if(n)t.d(1);i()}});t.o(e)}}function lt(t,e){const n=e.token={};function i(t,i,l,s){if(e.token!==n)return;e.resolved=s;let o=e.ctx;if(l!==undefined){o=o.slice();o[l]=s}const r=t&&(e.current=t)(o);let a=false;if(e.block){if(e.blocks){e.blocks.forEach((t,n)=>{if(n!==i&&t){tt();it(t,1,1,()=>{if(e.blocks[n]===t){e.blocks[n]=null}});et()}})}else{e.block.d(1)}r.c();nt(r,1);r.m(e.mount(),e.anchor);a=true}e.block=r;if(e.blocks)e.blocks[i]=r;if(a){K()}}if(f(t)){const n=q();t.then(t=>{H(n);i(e.then,1,e.value,t);H(null)},t=>{H(n);i(e.catch,2,e.error,t);H(null);if(!e.hasCatch){throw t}});if(e.current!==e.pending){i(e.pending,0);return true}}else{if(e.current!==e.then){i(e.then,1,e.value,t);return true}e.resolved=t}}function st(t,e){it(t,1,1,()=>{e.delete(t.key)})}function ot(t,e,n,i,l,s,o,r,a,c,f,u){let d=t.length;let m=s.length;let p=d;const g={};while(p--)g[t[p].key]=p;const h=[];const $=new Map;const b=new Map;p=m;while(p--){const t=u(l,s,p);const r=n(t);let a=o.get(r);if(!a){a=c(r,t);a.c()}else if(i){a.p(t,e)}$.set(r,h[p]=a);if(r in g)b.set(r,Math.abs(p-g[r]))}const y=new Set;const v=new Set;function j(t){nt(t,1);t.m(r,f);o.set(t.key,t);f=t.first;m--}while(d&&m){const e=h[m-1];const n=t[d-1];const i=e.key;const l=n.key;if(e===n){f=e.first;d--;m--}else if(!$.has(l)){a(n,o);d--}else if(!o.has(i)||y.has(i)){j(e)}else if(v.has(l)){d--}else if(b.get(i)>b.get(l)){v.add(i);j(e)}else{y.add(l);d--}}while(d--){const e=t[d];if(!$.has(e.key))a(e,o)}while(m)j(h[m-1]);return h}function rt(t,e){const n={};const i={};const l={$$scope:1};let s=t.length;while(s--){const o=t[s];const r=e[s];if(r){for(const t in o){if(!(t in r))i[t]=1}for(const t in r){if(!l[t]){n[t]=r[t];l[t]=1}}t[s]=r}else{for(const t in o){l[t]=1}}}for(const t in i){if(!(t in n))n[t]=undefined}return n}function at(t){return typeof t==="object"&&t!==null?t:{}}function ct(t,e,n){const i=t.$$.props[e];if(i!==undefined){t.$$.bound[i]=n;n(t.$$.ctx[i])}}function ft(t){t&&t.c()}function ut(t,e,n){const{fragment:i,on_mount:l,on_destroy:s,after_update:o}=t.$$;i&&i.m(e,n);D(()=>{const e=l.map(u).filter(p);if(s){s.push(...e)}else{m(e)}t.$$.on_mount=[]});o.forEach(D)}function dt(t,e){const n=t.$$;if(n.fragment!==null){m(n.on_destroy);n.fragment&&n.fragment.d(e);n.on_destroy=n.fragment=null;n.ctx=[]}}function mt(t,e){if(t.$$.dirty[0]===-1){S.push(t);Y();t.$$.dirty.fill(0)}t.$$.dirty[e/31|0]|=1<<e%31}function pt(t,e,n,i,l,s,o=[-1]){const r=O;H(t);const c=t.$$={fragment:null,ctx:null,props:s,update:a,not_equal:l,bound:d(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(r?r.$$.context:[]),callbacks:d(),dirty:o,skip_bound:false};let f=false;c.ctx=n?n(t,e.props||{},(e,n,...i)=>{const s=i.length?i[0]:n;if(c.ctx&&l(c.ctx[e],c.ctx[e]=s)){if(!c.skip_bound&&c.bound[e])c.bound[e](s);if(f)mt(t,e)}return n}):[];c.update();f=true;m(c.before_update);c.fragment=i?i(c.ctx):false;if(e.target){if(e.hydrate){const t=E(e.target);c.fragment&&c.fragment.l(t);t.forEach(y)}else{c.fragment&&c.fragment.c()}if(e.intro)nt(t.$$.fragment);ut(t,e.target,e.anchor);K()}H(r)}class gt{$destroy(){dt(this,1);this.$destroy=a}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);n.push(e);return()=>{const t=n.indexOf(e);if(t!==-1)n.splice(t,1)}}$set(t){if(this.$$set&&!h(t)){this.$$.skip_bound=true;this.$$set(t);this.$$.skip_bound=false}}}var ht=app;var $t=config;var bt=utils;function yt(t,e,n){const i=t.slice();i[38]=e[n];return i}function vt(t,e,n){const i=t.slice();i[38]=e[n];return i}function jt(t){let e;let n=t[38]+"";let i;let l;let s;let o;function r(){return t[32](t[38])}return{c(){e=j("button");i=k(n);l=k(" x");I(e,"class","btn btn-info btn-xs")},m(t,n){b(t,e,n);$(e,i);$(e,l);if(!s){o=A(e,"click",r);s=true}},p(e,l){t=e;if(l[0]&4&&n!==(n=t[38]+""))N(i,n)},d(t){if(t)y(e);s=false;o()}}}function kt(t){let e;let n=t[38]+"";let i;let l;let s;let o;function r(){return t[34](t[38])}return{c(){e=j("button");i=k(n);l=k(" x");I(e,"class","btn btn-info btn-xs")},m(t,n){b(t,e,n);$(e,i);$(e,l);if(!s){o=A(e,"click",r);s=true}},p(e,l){t=e;if(l[0]&8&&n!==(n=t[38]+""))N(i,n)},d(t){if(t)y(e);s=false;o()}}}function xt(t){let e;let n;let i;let l;let s;return{c(){e=j("button");n=j("i");I(n,"class","fa fa-trash");I(e,"class","btn btn-warning");I(e,"type","button");e.disabled=i=t[12]||t[13]},m(i,o){b(i,e,o);$(e,n);if(!l){s=A(e,"click",t[21]);l=true}},p(t,n){if(n[0]&12288&&i!==(i=t[12]||t[13])){e.disabled=i}},d(t){if(t)y(e);l=false;s()}}}function wt(t){let e;let n;let i;let l;let s;return{c(){e=j("button");n=j("i");I(n,"class","fa fa-check");I(e,"class","btn btn-success");I(e,"type","button");e.disabled=i=!t[11]},m(i,o){b(i,e,o);$(e,n);if(!l){s=A(e,"click",t[20]);l=true}},p(t,n){if(n[0]&2048&&i!==(i=!t[11])){e.disabled=i}},d(t){if(t)y(e);l=false;s()}}}function At(t){let e;let n;let i;let l;let s;let o;let r;let a;let c;let f;let u;let d;return{c(){e=j("tr");n=j("td");i=j("button");l=k("Cancel");s=x();o=j("td");o.innerHTML=`<span class="help-block">Are you sure you want to delete this emoji?</span>`;r=x();a=j("td");c=j("button");f=k("Yes");I(i,"class","btn btn-default");I(i,"type","button");i.disabled=t[13];I(o,"colspan",3);I(c,"class","btn btn-danger");I(c,"type","button");c.disabled=t[13];I(e,"class","svelte-11gdgpc");T(e,"fadeout",t[13])},m(m,p){b(m,e,p);$(e,n);$(n,i);$(i,l);$(e,s);$(e,o);$(e,r);$(e,a);$(a,c);$(c,f);if(!u){d=[A(i,"click",t[23]),A(c,"click",t[22])];u=true}},p(t,n){if(n[0]&8192){i.disabled=t[13]}if(n[0]&8192){c.disabled=t[13]}if(n[0]&8192){T(e,"fadeout",t[13])}},d(t){if(t)y(e);u=false;m(d)}}}function It(t){let e;return{c(){e=j("tr");e.innerHTML=`<td colspan="${5}"><span><strong>Name</strong> is required</span></td>`;I(e,"class","text-danger svelte-11gdgpc")},m(t,n){b(t,e,n)},d(t){if(t)y(e)}}}function Et(t){let e;return{c(){e=j("tr");e.innerHTML=`<td colspan="${5}"><span><strong>Image</strong> is required</span></td>`;I(e,"class","text-danger svelte-11gdgpc")},m(t,n){b(t,e,n)},d(t){if(t)y(e)}}}function Nt(t){let e;return{c(){e=j("tr");e.innerHTML=`<td colspan="${5}"><span><strong>Name</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>`;I(e,"class","text-danger svelte-11gdgpc")},m(t,n){b(t,e,n)},d(t){if(t)y(e)}}}function Mt(t){let e;return{c(){e=j("tr");e.innerHTML=`<td colspan="${5}"><span><strong>Aliases</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>`;I(e,"class","text-danger svelte-11gdgpc")},m(t,n){b(t,e,n)},d(t){if(t)y(e)}}}function _t(t){let e;let i;let l;let s;let o;let r;let c=n.buildEmoji({character:"",pack:"customizations",keywords:[],name:t[0],aliases:t[2],image:t[1]})+"";let f;let u;let d;let p;let g;let h;let k;let E;let N;let L;let C;let O;let H;let q;let z;let R;let S;let F;let B;let P;let Q;let U;let Y;let D;let W;let G;let J;let K;let V;let X;let Z;let tt;let et;let nt=t[2];let it=[];for(let e=0;e<nt.length;e+=1){it[e]=jt(vt(t,nt,e))}let lt=t[3];let st=[];for(let e=0;e<lt.length;e+=1){st[e]=kt(yt(t,lt,e))}function ot(t,e){if(t[5]||t[18])return wt;return xt}let rt=ot(t);let at=rt(t);let ct=(t[12]||t[13])&&At(t);let ft=t[5]&&t[6].nameRequired&&It();let ut=t[5]&&t[6].imageRequired&&Et();let dt=t[5]&&t[6].nameInvalid&&Nt();let mt=t[5]&&t[6].aliasInvalid&&Mt();return{c(){e=j("tr");i=j("td");l=j("input");s=x();o=j("td");r=j("button");f=x();u=j("form");d=j("input");p=x();g=j("input");h=x();k=j("td");E=j("div");N=j("input");L=x();C=j("div");O=j("button");O.textContent="+";H=x();q=j("span");for(let t=0;t<it.length;t+=1){it[t].c()}z=x();R=j("td");S=j("div");F=j("input");B=x();P=j("div");Q=j("button");Q.textContent="+";U=x();Y=j("span");for(let t=0;t<st.length;t+=1){st[t].c()}D=x();W=j("td");at.c();G=x();if(ct)ct.c();J=x();if(ft)ft.c();K=x();if(ut)ut.c();V=x();if(dt)dt.c();X=x();if(mt)mt.c();Z=w();I(l,"type","text");I(l,"class","form-control emoji-name svelte-11gdgpc");I(r,"type","button");I(r,"class","btn btn-default");I(d,"type","file");I(d,"name","emojiImage");I(d,"accept","image/*");I(g,"type","hidden");I(g,"name","fileName");I(u,"action",`${$t.relative_path}/api/admin/plugins/emoji/upload`);I(u,"method","post");I(u,"enctype","multipart/form-data");_(u,"display","none");I(N,"type","text");I(N,"class","form-control");I(O,"class","btn btn-default");I(C,"class","input-group-addon");I(E,"class","input-group");I(F,"type","text");I(F,"class","form-control");I(Q,"class","btn btn-default");I(P,"class","input-group-addon");I(S,"class","input-group");I(e,"class","svelte-11gdgpc");T(e,"fadeout",t[13])},m(n,a){b(n,e,a);$(e,i);$(i,l);M(l,t[0]);$(e,s);$(e,o);$(o,r);r.innerHTML=c;$(o,f);$(o,u);$(u,d);t[28](d);$(u,p);$(u,g);t[29](g);t[30](u);$(e,h);$(e,k);$(k,E);$(E,N);M(N,t[4]);$(E,L);$(E,C);$(C,O);$(k,H);$(k,q);for(let t=0;t<it.length;t+=1){it[t].m(q,null)}$(e,z);$(e,R);$(R,S);$(S,F);M(F,t[10]);$(S,B);$(S,P);$(P,Q);$(R,U);$(R,Y);for(let t=0;t<st.length;t+=1){st[t].m(Y,null)}$(e,D);$(e,W);at.m(W,null);b(n,G,a);if(ct)ct.m(n,a);b(n,J,a);if(ft)ft.m(n,a);b(n,K,a);if(ut)ut.m(n,a);b(n,V,a);if(dt)dt.m(n,a);b(n,X,a);if(mt)mt.m(n,a);b(n,Z,a);if(!tt){et=[A(l,"input",t[27]),A(r,"click",t[19]),A(N,"input",t[31]),A(O,"click",t[15]),A(F,"input",t[33]),A(Q,"click",t[17])];tt=true}},p(t,i){if(i[0]&1&&l.value!==t[0]){M(l,t[0])}if(i[0]&7&&c!==(c=n.buildEmoji({character:"",pack:"customizations",keywords:[],name:t[0],aliases:t[2],image:t[1]})+""))r.innerHTML=c;if(i[0]&16&&N.value!==t[4]){M(N,t[4])}if(i[0]&16388){nt=t[2];let e;for(e=0;e<nt.length;e+=1){const n=vt(t,nt,e);if(it[e]){it[e].p(n,i)}else{it[e]=jt(n);it[e].c();it[e].m(q,null)}}for(;e<it.length;e+=1){it[e].d(1)}it.length=nt.length}if(i[0]&1024&&F.value!==t[10]){M(F,t[10])}if(i[0]&65544){lt=t[3];let e;for(e=0;e<lt.length;e+=1){const n=yt(t,lt,e);if(st[e]){st[e].p(n,i)}else{st[e]=kt(n);st[e].c();st[e].m(Y,null)}}for(;e<st.length;e+=1){st[e].d(1)}st.length=lt.length}if(rt===(rt=ot(t))&&at){at.p(t,i)}else{at.d(1);at=rt(t);if(at){at.c();at.m(W,null)}}if(i[0]&8192){T(e,"fadeout",t[13])}if(t[12]||t[13]){if(ct){ct.p(t,i)}else{ct=At(t);ct.c();ct.m(J.parentNode,J)}}else if(ct){ct.d(1);ct=null}if(t[5]&&t[6].nameRequired){if(ft);else{ft=It();ft.c();ft.m(K.parentNode,K)}}else if(ft){ft.d(1);ft=null}if(t[5]&&t[6].imageRequired){if(ut);else{ut=Et();ut.c();ut.m(V.parentNode,V)}}else if(ut){ut.d(1);ut=null}if(t[5]&&t[6].nameInvalid){if(dt);else{dt=Nt();dt.c();dt.m(X.parentNode,X)}}else if(dt){dt.d(1);dt=null}if(t[5]&&t[6].aliasInvalid){if(mt);else{mt=Mt();mt.c();mt.m(Z.parentNode,Z)}}else if(mt){mt.d(1);mt=null}},i:a,o:a,d(n){if(n)y(e);t[28](null);t[29](null);t[30](null);v(it,n);v(st,n);at.d();if(n)y(G);if(ct)ct.d(n);if(n)y(J);if(ft)ft.d(n);if(n)y(K);if(ut)ut.d(n);if(n)y(V);if(dt)dt.d(n);if(n)y(X);if(mt)mt.d(n);if(n)y(Z);tt=false;m(et)}}}const Tt=/[^a-z\-.+0-9_]/i;function Lt(t,e){if(t===e){return true}if(typeof t!==typeof e){return false}if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length){return t.every((t,n)=>Lt(t,e[n]))}if(Array.isArray(t)||Array.isArray(e)){return false}if(typeof t==="object"){const n=Object.keys(t);if(Object.keys(e).length!==n.length){return false}return n.every(n=>Lt(t[n],e[n]))}return false}function Ct(t,e,n){var i,l;let{emoji:s}=e;let{id:o}=e;let r=s.name;let a=s.image;let c=s.aliases.slice();let f=s.ascii.slice();function u(){n(0,r=s.name);n(1,a=s.image);n(2,c=s.aliases.slice());n(3,f=s.ascii.slice())}let d;let m;let p;let g="";function h(t){n(2,c=c.filter(e=>e!==t))}function $(){if(!g||c.includes(g)){return}n(2,c=[...c,g]);n(4,g="")}let b="";function y(t){n(3,f=f.filter(e=>e!==t))}function v(){if(!b||f.includes(b)){return}n(3,f=[...f,b]);n(10,b="")}const j=!s.name&&!s.image&&!((i=s.aliases)===null||i===void 0?void 0:i.length)&&!((l=s.ascii)===null||l===void 0?void 0:l.length);let k=false;const x={nameRequired:false,imageRequired:false,nameInvalid:false,aliasInvalid:false,any:false};let w=false;function A(){m.click();jQuery(m).one("change",()=>{if(!m.files.length){return}const t=`${bt.generateUUID()}-${m.files[0].name}`;n(9,p.value=t,p);jQuery(d).ajaxSubmit({headers:{"x-csrf-token":$t.csrf_token},success:()=>{n(1,a=t);n(8,m.value="",m)},error:()=>{const t=Error("Failed to upload file");console.error(t);ht.alertError(t);n(8,m.value="",m)}})})}const I=R();function E(){I("save",{id:o,emoji:{name:r,image:a,aliases:c,ascii:f}})}let N=false;let M=false;function _(){n(12,N=true)}function T(){n(12,N=false);n(13,M=true);setTimeout(()=>{I("delete",{id:o})},250)}function L(){n(12,N=false)}function C(){r=this.value;n(0,r)}function O(t){F[t?"unshift":"push"](()=>{m=t;n(8,m)})}function H(t){F[t?"unshift":"push"](()=>{p=t;n(9,p)})}function q(t){F[t?"unshift":"push"](()=>{d=t;n(7,d)})}function z(){g=this.value;n(4,g)}const S=t=>h(t);function B(){b=this.value;n(10,b)}const P=t=>y(t);t.$$set=(t=>{if("emoji"in t)n(24,s=t.emoji);if("id"in t)n(25,o=t.id)});t.$$.update=(()=>{if(t.$$.dirty[0]&16777231){n(5,k=!Lt({name:r,image:a,aliases:c,ascii:f},s))}if(t.$$.dirty[0]&1){n(6,x.nameRequired=!r,x)}if(t.$$.dirty[0]&2){n(6,x.imageRequired=!a,x)}if(t.$$.dirty[0]&1){n(6,x.nameInvalid=Tt.test(r),x)}if(t.$$.dirty[0]&16){n(6,x.aliasInvalid=Tt.test(g),x)}if(t.$$.dirty[0]&64){n(6,x.any=x.nameRequired||x.imageRequired||x.nameInvalid||x.aliasInvalid,x)}if(t.$$.dirty[0]&96){n(11,w=k&&!x.any)}});return[r,a,c,f,g,k,x,d,m,p,b,w,N,M,h,$,y,v,j,A,E,_,T,L,s,o,u,C,O,H,q,z,S,B,P]}class Ot extends gt{constructor(t){super();pt(this,t,Ct,_t,g,{emoji:24,id:25,reset:26},[-1,-1])}get reset(){return this.$$.ctx[26]}}function Ht(t,e,n){const i=t.slice();i[9]=e[n];return i}function qt(t,e){let n;let i;let l;const s=[e[9]];let o={};for(let t=0;t<s.length;t+=1){o=c(o,s[t])}i=new Ot({props:o});i.$on("save",e[3]);i.$on("delete",e[4]);return{key:t,first:null,c(){n=w();ft(i.$$.fragment);this.first=n},m(t,e){b(t,n,e);ut(i,t,e);l=true},p(t,n){e=t;const l=n&1?rt(s,[at(e[9])]):{};i.$set(l)},i(t){if(l)return;nt(i.$$.fragment,t);l=true},o(t){it(i.$$.fragment,t);l=false},d(t){if(t)y(n);dt(i,t)}}}function zt(t){let e;let n;let i;let l;let s=[];let o=new Map;let r;let a;let c;let f;let u;let d=t[0];const m=t=>t[9].id;for(let e=0;e<d.length;e+=1){let n=Ht(t,d,e);let i=m(n);o.set(i,s[e]=qt(i,n))}function p(e){t[7](e)}let g={id:-1,emoji:t[2]};if(t[1]!==void 0){g.reset=t[1]}c=new Ot({props:g});F.push(()=>ct(c,"reset",p));c.$on("save",t[5]);return{c(){e=j("table");n=j("thead");n.innerHTML=`<tr><th>Name</th><th>Image</th><th>Aliases</th><th>ASCII patterns</th><th></th></tr>`;i=x();l=j("tbody");for(let t=0;t<s.length;t+=1){s[t].c()}r=x();a=j("tfoot");ft(c.$$.fragment);I(e,"class","table")},m(t,o){b(t,e,o);$(e,n);$(e,i);$(e,l);for(let t=0;t<s.length;t+=1){s[t].m(l,null)}$(e,r);$(e,a);ut(c,a,null);u=true},p(t,[e]){if(e&25){d=t[0];tt();s=ot(s,e,m,1,t,d,o,l,st,qt,null,Ht);et()}const n={};if(e&4)n.emoji=t[2];if(!f&&e&2){f=true;n.reset=t[1];W(()=>f=false)}c.$set(n)},i(t){if(u)return;for(let t=0;t<d.length;t+=1){nt(s[t])}nt(c.$$.fragment,t);u=true},o(t){for(let t=0;t<s.length;t+=1){it(s[t])}it(c.$$.fragment,t);u=false},d(t){if(t)y(e);for(let t=0;t<s.length;t+=1){s[t].d()}dt(c)}}}function Rt(t,e,n){let{emojis:i}=e;let l;function s(t){const{id:e,emoji:l}=t.detail;o["default"].put(`/admin/plugins/emoji/customizations/emoji/${e}`,{item:l}).then(()=>{n(6,i=Object.assign(Object.assign({},i),{[e]:l}))},()=>ht.alertError())}function r(t){const{id:e}=t.detail;o["default"].del(`/admin/plugins/emoji/customizations/emoji/${e}`,{}).then(()=>{delete i[e];n(6,i=Object.assign({},i))},()=>ht.alertError())}const a={name:"",image:"",aliases:[],ascii:[]};let c;let f=Object.assign({},a);function u(t){const{emoji:e}=t.detail;o["default"].post("/admin/plugins/emoji/customizations/emoji",{item:e}).then(({id:t})=>{n(6,i=Object.assign(Object.assign({},i),{[t]:e}));n(2,f=Object.assign({},a));c()},()=>ht.alertError())}function d(t){c=t;n(1,c)}t.$$set=(t=>{if("emojis"in t)n(6,i=t.emojis)});t.$$.update=(()=>{if(t.$$.dirty&64){{n(0,l=Object.keys(i).map(t=>({id:parseInt(t,10),emoji:i[t]})))}}});return[l,c,f,s,r,u,i,d]}class St extends gt{constructor(t){super();pt(this,t,Rt,zt,g,{emojis:6})}}var Ft=Textcomplete;function Bt(t,e,n){const i=t.slice();i[33]=e[n];return i}function Pt(t,e,n){const i=t.slice();i[33]=e[n];return i}function Qt(t){let e;let i=n.buildEmoji(t[10])+"";let l;return{c(){l=w();e=new C(l)},m(t,n){e.m(i,t,n);b(t,l,n)},p(t,l){if(l[0]&1024&&i!==(i=n.buildEmoji(t[10])+""))e.p(i)},d(t){if(t)y(l);if(t)e.d()}}}function Ut(t){let e;let n=t[33]+"";let i;let l;let s;let o;function r(){return t[27](t[33])}return{c(){e=j("button");i=k(n);l=k(" x");I(e,"class","btn btn-info btn-xs")},m(t,n){b(t,e,n);$(e,i);$(e,l);if(!s){o=A(e,"click",r);s=true}},p(e,l){t=e;if(l[0]&2&&n!==(n=t[33]+""))N(i,n)},d(t){if(t)y(e);s=false;o()}}}function Yt(t){let e;let n=t[33]+"";let i;let l;let s;let o;function r(){return t[29](t[33])}return{c(){e=j("button");i=k(n);l=k(" x");I(e,"class","btn btn-info btn-xs")},m(t,n){b(t,e,n);$(e,i);$(e,l);if(!s){o=A(e,"click",r);s=true}},p(e,l){t=e;if(l[0]&4&&n!==(n=t[33]+""))N(i,n)},d(t){if(t)y(e);s=false;o()}}}function Dt(t){let e;let n;let i;let l;let s;return{c(){e=j("button");n=j("i");I(n,"class","fa fa-trash");I(e,"class","btn btn-warning");I(e,"type","button");e.disabled=i=t[8]||t[9]},m(i,o){b(i,e,o);$(e,n);if(!l){s=A(e,"click",t[18]);l=true}},p(t,n){if(n[0]&768&&i!==(i=t[8]||t[9])){e.disabled=i}},d(t){if(t)y(e);l=false;s()}}}function Wt(t){let e;let n;let i;let l;let s;return{c(){e=j("button");n=j("i");I(n,"class","fa fa-check");I(e,"class","btn btn-success");I(e,"type","button");e.disabled=i=!t[11]},m(i,o){b(i,e,o);$(e,n);if(!l){s=A(e,"click",t[17]);l=true}},p(t,n){if(n[0]&2048&&i!==(i=!t[11])){e.disabled=i}},d(t){if(t)y(e);l=false;s()}}}function Gt(t){let e;let n;let i;let l;let s;let o;let r;let a;let c;let f;let u;let d;return{c(){e=j("tr");n=j("td");i=j("button");l=k("Cancel");s=x();o=j("td");o.innerHTML=`<span class="help-block">Are you sure you want to delete this extension?</span>`;r=x();a=j("td");c=j("button");f=k("Yes");I(i,"class","btn btn-default");I(i,"type","button");i.disabled=t[9];I(o,"colspan",3);I(c,"class","btn btn-danger");I(c,"type","button");c.disabled=t[9];I(e,"class","svelte-11gdgpc");T(e,"fadeout",t[9])},m(m,p){b(m,e,p);$(e,n);$(n,i);$(i,l);$(e,s);$(e,o);$(e,r);$(e,a);$(a,c);$(c,f);if(!u){d=[A(i,"click",t[20]),A(c,"click",t[19])];u=true}},p(t,n){if(n[0]&512){i.disabled=t[9]}if(n[0]&512){c.disabled=t[9]}if(n[0]&512){T(e,"fadeout",t[9])}},d(t){if(t)y(e);u=false;m(d)}}}function Jt(t){let e;return{c(){e=j("tr");e.innerHTML=`<td colspan="${5}"><span><strong>Name</strong> is required</span></td>`;I(e,"class","text-danger svelte-11gdgpc")},m(t,n){b(t,e,n)},d(t){if(t)y(e)}}}function Kt(t){let e;return{c(){e=j("tr");e.innerHTML=`<td colspan="${5}"><span><strong>Name</strong> must be an existing emoji</span></td>`;I(e,"class","text-danger svelte-11gdgpc")},m(t,n){b(t,e,n)},d(t){if(t)y(e)}}}function Vt(t){let e;return{c(){e=j("tr");e.innerHTML=`<td colspan="${5}"><span><strong>Aliases</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>`;I(e,"class","text-danger svelte-11gdgpc")},m(t,n){b(t,e,n)},d(t){if(t)y(e)}}}function Xt(t){let e;return{c(){e=j("tr");e.innerHTML=`<td colspan="${5}"><span>Must provide at least one <strong>Alias</strong> or <strong>ASCII Pattern</strong>.</span></td>`;I(e,"class","text-danger svelte-11gdgpc")},m(t,n){b(t,e,n)},d(t){if(t)y(e)}}}function Zt(t){let e;let n;let i;let l;let s;let o;let r;let c;let f;let u;let d;let p;let g;let h;let k;let E;let N;let _;let L;let C;let O;let H;let q;let z;let R;let S;let F;let B;let P;let Q;let U;let Y;let D;let W=t[10]&&Qt(t);let G=t[1];let J=[];for(let e=0;e<G.length;e+=1){J[e]=Ut(Pt(t,G,e))}let K=t[2];let V=[];for(let e=0;e<K.length;e+=1){V[e]=Yt(Bt(t,K,e))}function X(t,e){if(t[5]||t[12])return Wt;return Dt}let Z=X(t);let tt=Z(t);let et=(t[8]||t[9])&&Gt(t);let nt=t[5]&&t[4].nameRequired&&Jt();let it=t[5]&&t[4].nameInvalid&&Kt();let lt=t[5]&&t[4].aliasInvalid&&Vt();let st=t[5]&&t[4].noChange&&Xt();return{c(){e=j("tr");n=j("td");i=j("input");l=x();s=j("td");if(W)W.c();o=x();r=j("td");c=j("div");f=j("input");u=x();d=j("div");p=j("button");p.textContent="+";g=x();h=j("span");for(let t=0;t<J.length;t+=1){J[t].c()}k=x();E=j("td");N=j("div");_=j("input");L=x();C=j("div");O=j("button");O.textContent="+";H=x();q=j("span");for(let t=0;t<V.length;t+=1){V[t].c()}z=x();R=j("td");tt.c();S=x();if(et)et.c();F=x();if(nt)nt.c();B=x();if(it)it.c();P=x();if(lt)lt.c();Q=x();if(st)st.c();U=w();I(i,"type","text");I(i,"class","form-control emoji-name svelte-11gdgpc");I(f,"type","text");I(f,"class","form-control");I(p,"class","btn btn-default");I(d,"class","input-group-addon");I(c,"class","input-group");I(_,"type","text");I(_,"class","form-control");I(O,"class","btn btn-default");I(C,"class","input-group-addon");I(N,"class","input-group");I(e,"class","svelte-11gdgpc");T(e,"fadeout",t[9])},m(a,m){b(a,e,m);$(e,n);$(n,i);M(i,t[0]);t[25](i);$(e,l);$(e,s);if(W)W.m(s,null);$(e,o);$(e,r);$(r,c);$(c,f);M(f,t[3]);$(c,u);$(c,d);$(d,p);$(r,g);$(r,h);for(let t=0;t<J.length;t+=1){J[t].m(h,null)}$(e,k);$(e,E);$(E,N);$(N,_);M(_,t[6]);$(N,L);$(N,C);$(C,O);$(E,H);$(E,q);for(let t=0;t<V.length;t+=1){V[t].m(q,null)}$(e,z);$(e,R);tt.m(R,null);b(a,S,m);if(et)et.m(a,m);b(a,F,m);if(nt)nt.m(a,m);b(a,B,m);if(it)it.m(a,m);b(a,P,m);if(lt)lt.m(a,m);b(a,Q,m);if(st)st.m(a,m);b(a,U,m);if(!Y){D=[A(i,"input",t[24]),A(f,"input",t[26]),A(p,"click",t[14]),A(_,"input",t[28]),A(O,"click",t[16])];Y=true}},p(t,n){if(n[0]&1&&i.value!==t[0]){M(i,t[0])}if(t[10]){if(W){W.p(t,n)}else{W=Qt(t);W.c();W.m(s,null)}}else if(W){W.d(1);W=null}if(n[0]&8&&f.value!==t[3]){M(f,t[3])}if(n[0]&8194){G=t[1];let e;for(e=0;e<G.length;e+=1){const i=Pt(t,G,e);if(J[e]){J[e].p(i,n)}else{J[e]=Ut(i);J[e].c();J[e].m(h,null)}}for(;e<J.length;e+=1){J[e].d(1)}J.length=G.length}if(n[0]&64&&_.value!==t[6]){M(_,t[6])}if(n[0]&32772){K=t[2];let e;for(e=0;e<K.length;e+=1){const i=Bt(t,K,e);if(V[e]){V[e].p(i,n)}else{V[e]=Yt(i);V[e].c();V[e].m(q,null)}}for(;e<V.length;e+=1){V[e].d(1)}V.length=K.length}if(Z===(Z=X(t))&&tt){tt.p(t,n)}else{tt.d(1);tt=Z(t);if(tt){tt.c();tt.m(R,null)}}if(n[0]&512){T(e,"fadeout",t[9])}if(t[8]||t[9]){if(et){et.p(t,n)}else{et=Gt(t);et.c();et.m(F.parentNode,F)}}else if(et){et.d(1);et=null}if(t[5]&&t[4].nameRequired){if(nt);else{nt=Jt();nt.c();nt.m(B.parentNode,B)}}else if(nt){nt.d(1);nt=null}if(t[5]&&t[4].nameInvalid){if(it);else{it=Kt();it.c();it.m(P.parentNode,P)}}else if(it){it.d(1);it=null}if(t[5]&&t[4].aliasInvalid){if(lt);else{lt=Vt();lt.c();lt.m(Q.parentNode,Q)}}else if(lt){lt.d(1);lt=null}if(t[5]&&t[4].noChange){if(st);else{st=Xt();st.c();st.m(U.parentNode,U)}}else if(st){st.d(1);st=null}},i:a,o:a,d(n){if(n)y(e);t[25](null);if(W)W.d();v(J,n);v(V,n);tt.d();if(n)y(S);if(et)et.d(n);if(n)y(F);if(nt)nt.d(n);if(n)y(B);if(it)it.d(n);if(n)y(P);if(lt)lt.d(n);if(n)y(Q);if(st)st.d(n);if(n)y(U);Y=false;m(D)}}}const te=/[^a-z\-.+0-9_]/i;function ee(t,e){if(t===e){return true}if(typeof t!==typeof e){return false}if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length){return t.every((t,n)=>ee(t,e[n]))}if(Array.isArray(t)||Array.isArray(e)){return false}if(typeof t==="object"){const n=Object.keys(t);if(Object.keys(e).length!==n.length){return false}return n.every(n=>ee(t[n],e[n]))}return false}function ne(t,e,i){let l;let s;let o;var r,a;let{item:c}=e;let{id:f}=e;let u=c.name;let d=c.aliases.slice();let m=c.ascii.slice();function p(){i(0,u=c.name);i(1,d=c.aliases.slice());i(2,m=c.ascii.slice())}const g=!c.name&&!((r=c.aliases)===null||r===void 0?void 0:r.length)&&!((a=c.ascii)===null||a===void 0?void 0:a.length);let h="";function $(t){i(1,d=d.filter(e=>e!==t))}function b(){if(!h||d.includes(h)){return}i(1,d=[...d,h]);i(3,h="")}let y="";function v(t){i(2,m=m.filter(e=>e!==t))}function j(){if(!y||m.includes(y)){return}i(2,m=[...m,y]);i(6,y="")}const k={nameRequired:false,nameInvalid:false,aliasInvalid:false,noChange:false,any:false};let x;z(()=>{const{Textarea:t}=Ft.editors;const e=new t(x);const l=new Ft(e,{dropdown:{style:{zIndex:2e4}}});l.register([Object.assign(Object.assign({},n.strategy),{replace:t=>t.name,match:/^(.+)$/})]);l.on("selected",()=>{i(0,u=x.value)})});const w=R();function A(){w("save",{id:f,item:{name:u,aliases:d,ascii:m}})}let I=false;let E=false;function N(){i(8,I=true)}function M(){i(8,I=false);i(9,E=true);setTimeout(()=>{w("delete",{id:f})},250)}function _(){i(8,I=false)}function T(){u=this.value;i(0,u)}function L(t){F[t?"unshift":"push"](()=>{x=t;i(7,x)})}function C(){h=this.value;i(3,h)}const O=t=>$(t);function H(){y=this.value;i(6,y)}const q=t=>v(t);t.$$set=(t=>{if("item"in t)i(21,c=t.item);if("id"in t)i(22,f=t.id)});t.$$.update=(()=>{if(t.$$.dirty[0]&1){i(10,l=u&&n.table[u])}if(t.$$.dirty[0]&2097159){i(5,s=!ee({name:u,aliases:d,ascii:m},c))}if(t.$$.dirty[0]&1){i(4,k.nameRequired=!u,k)}if(t.$$.dirty[0]&1){i(4,k.nameInvalid=!n.table[u],k)}if(t.$$.dirty[0]&8){i(4,k.aliasInvalid=te.test(h),k)}if(t.$$.dirty[0]&6){i(4,k.noChange=!d.length&&!m.length,k)}if(t.$$.dirty[0]&16){i(4,k.any=k.nameRequired||k.nameInvalid||k.aliasInvalid||k.noChange,k)}if(t.$$.dirty[0]&48){i(11,o=s&&!k.any)}});return[u,d,m,h,k,s,y,x,I,E,l,o,g,$,b,v,j,A,N,M,_,c,f,p,T,L,C,O,H,q]}class ie extends gt{constructor(t){super();pt(this,t,ne,Zt,g,{item:21,id:22,reset:23},[-1,-1])}get reset(){return this.$$.ctx[23]}}function le(t,e,n){const i=t.slice();i[10]=e[n];return i}function se(t,e){let n;let i;let l;const s=[e[10]];let o={};for(let t=0;t<s.length;t+=1){o=c(o,s[t])}i=new ie({props:o});i.$on("save",e[3]);i.$on("delete",e[4]);return{key:t,first:null,c(){n=w();ft(i.$$.fragment);this.first=n},m(t,e){b(t,n,e);ut(i,t,e);l=true},p(t,n){e=t;const l=n&1?rt(s,[at(e[10])]):{};i.$set(l)},i(t){if(l)return;nt(i.$$.fragment,t);l=true},o(t){it(i.$$.fragment,t);l=false},d(t){if(t)y(n);dt(i,t)}}}function oe(t){let e;let n;let i;let l;let s=[];let o=new Map;let r;let a;let c;let f;let u;let d=t[0];const m=t=>t[10].id;for(let e=0;e<d.length;e+=1){let n=le(t,d,e);let i=m(n);o.set(i,s[e]=se(i,n))}function p(e){t[8](e)}let g={id:-1,item:t[2]};if(t[1]!==void 0){g.reset=t[1]}c=new ie({props:g});F.push(()=>ct(c,"reset",p));c.$on("save",t[5]);return{c(){e=j("table");n=j("thead");n.innerHTML=`<tr><th>Name</th><th>Image</th><th>Aliases</th><th>ASCII patterns</th><th></th></tr>`;i=x();l=j("tbody");for(let t=0;t<s.length;t+=1){s[t].c()}r=x();a=j("tfoot");ft(c.$$.fragment);I(e,"class","table")},m(t,o){b(t,e,o);$(e,n);$(e,i);$(e,l);for(let t=0;t<s.length;t+=1){s[t].m(l,null)}$(e,r);$(e,a);ut(c,a,null);u=true},p(t,[e]){if(e&25){d=t[0];tt();s=ot(s,e,m,1,t,d,o,l,st,se,null,le);et()}const n={};if(e&4)n.item=t[2];if(!f&&e&2){f=true;n.reset=t[1];W(()=>f=false)}c.$set(n)},i(t){if(u)return;for(let t=0;t<d.length;t+=1){nt(s[t])}nt(c.$$.fragment,t);u=true},o(t){for(let t=0;t<s.length;t+=1){it(s[t])}it(c.$$.fragment,t);u=false},d(t){if(t)y(e);for(let t=0;t<s.length;t+=1){s[t].d()}dt(c)}}}function re(t,e,n){let{type:i="adjunct"}=e;let{record:l}=e;let s;function r(t){const{id:e,item:s}=t.detail;o["default"].put(`/admin/plugins/emoji/customizations/${i}/${e}`,{item:s}).then(()=>{n(6,l=Object.assign(Object.assign({},l),{[e]:s}))},()=>ht.alertError())}function a(t){const{id:e}=t.detail;o["default"].del(`/admin/plugins/emoji/customizations/${i}/${e}`,{}).then(()=>{delete l[e];n(6,l=Object.assign({},l))},()=>ht.alertError())}const c={name:"",aliases:[],ascii:[]};let f;let u=Object.assign({},c);function d(t){const{item:e}=t.detail;o["default"].post(`/admin/plugins/emoji/customizations/${i}`,{item:e}).then(({id:t})=>{n(6,l=Object.assign(Object.assign({},l),{[t]:e}));n(2,u=Object.assign({},c));f()},()=>ht.alertError())}function m(t){f=t;n(1,f)}t.$$set=(t=>{if("type"in t)n(7,i=t.type);if("record"in t)n(6,l=t.record)});t.$$.update=(()=>{if(t.$$.dirty&64){{n(0,s=Object.keys(l).map(t=>({id:parseInt(t,10),item:l[t]})))}}});return[s,f,u,r,a,d,l,i,m]}class ae extends gt{constructor(t){super();pt(this,t,re,oe,g,{type:7,record:6})}}function ce(t){let e;let n;let i;let l;let s;let o;let r;let a;let c;let f;let u;let d;let m;let p;let g;let h;let v;let k;let w;let A;d=new St({props:{emojis:t[0].emojis}});v=new ae({props:{record:t[0].adjuncts}});return{c(){e=j("div");n=j("div");i=j("div");l=j("div");l.innerHTML=`<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> \n        <h4 class="modal-title" id="editModalLabel">Customize Emoji</h4>`;s=x();o=j("div");r=j("p");r.innerHTML=`Below you can add custom emoji, and also add new aliases\n          and ASCII patterns for existing emoji. While this list is\n          edited live, you must still <strong>Build Emoji Assets</strong>\n          to actually use these customizations.`;a=x();c=j("div");f=j("div");f.innerHTML=`<h3 class="panel-title">Custom Emoji</h3>`;u=x();ft(d.$$.fragment);m=x();p=j("div");g=j("div");g.innerHTML=`<h3 class="panel-title">Custom Extensions</h3>`;h=x();ft(v.$$.fragment);k=x();w=j("link");I(l,"class","modal-header");I(f,"class","panel-heading");I(c,"class","panel panel-default");I(g,"class","panel-heading");I(p,"class","panel panel-default");I(o,"class","modal-body");I(i,"class","modal-content");I(n,"class","modal-dialog modal-lg");I(e,"class","modal fade");I(e,"tabindex","-1");I(e,"role","dialog");I(e,"aria-labelledby","editModalLabel");I(e,"aria-hidden","true");I(w,"rel","stylesheet");I(w,"href",`${$t.relative_path}/plugins/nodebb-plugin-emoji/emoji/styles.css?${$t["cache-buster"]}`)},m(y,j){b(y,e,j);$(e,n);$(n,i);$(i,l);$(i,s);$(i,o);$(o,r);$(o,a);$(o,c);$(c,f);$(c,u);ut(d,c,null);$(o,m);$(o,p);$(p,g);$(p,h);ut(v,p,null);t[3](e);b(y,k,j);$(document.head,w);A=true},p(t,[e]){const n={};if(e&1)n.emojis=t[0].emojis;d.$set(n);const i={};if(e&1)i.record=t[0].adjuncts;v.$set(i)},i(t){if(A)return;nt(d.$$.fragment,t);nt(v.$$.fragment,t);A=true},o(t){it(d.$$.fragment,t);it(v.$$.fragment,t);A=false},d(n){if(n)y(e);dt(d);dt(v);t[3](null);if(n)y(k);y(w)}}}function fe(t,e,n){let{data:i}=e;let l;function o(){s["default"](l).modal("show")}function r(t){F[t?"unshift":"push"](()=>{l=t;n(1,l)})}t.$$set=(t=>{if("data"in t)n(0,i=t.data)});return[i,l,o,r]}class ue extends gt{constructor(t){super();pt(this,t,fe,ce,g,{data:0,show:2})}get show(){return this.$$.ctx[2]}}function de(t){return{c:a,m:a,p:a,d:a}}function me(t){let e;let n=t[2]+"";let i;return{c(){i=w();e=new C(i)},m(t,l){e.m(n,t,l);b(t,i,l)},p(t,i){if(i&1&&n!==(n=t[2]+""))e.p(n)},d(t){if(t)y(i);if(t)e.d()}}}function pe(t){return{c:a,m:a,p:a,d:a}}function ge(t){let e;let n;let i={ctx:t,current:null,token:null,hasCatch:false,pending:pe,then:me,catch:de,value:2};lt(n=t[1].translate(t[0]),i);return{c(){e=w();i.block.c()},m(t,n){b(t,e,n);i.block.m(t,i.anchor=n);i.mount=(()=>e.parentNode);i.anchor=e},p(e,[l]){t=e;i.ctx=t;if(l&1&&n!==(n=t[1].translate(t[0]))&&lt(n,i));else{const e=t.slice();e[2]=i.resolved;i.block.p(e,l)}},i:a,o:a,d(t){if(t)y(e);i.block.d(t);i.token=null;i=null}}}function he(t,e,n){const l=i.Translator.create();let{src:s}=e;t.$$set=(t=>{if("src"in t)n(0,s=t.src)});return[s,l]}class $e extends gt{constructor(t){super();pt(this,t,he,ge,g,{src:0})}}function be(t){let e;let n;let i;let l={ctx:t,current:null,token:null,hasCatch:false,pending:je,then:ve,catch:ye,value:11,blocks:[,,,]};lt(n=t[2],l);return{c(){e=w();l.block.c()},m(t,n){b(t,e,n);l.block.m(t,l.anchor=n);l.mount=(()=>e.parentNode);l.anchor=e;i=true},p(e,i){t=e;l.ctx=t;if(i&4&&n!==(n=t[2])&&lt(n,l));else{const e=t.slice();e[11]=l.resolved;l.block.p(e,i)}},i(t){if(i)return;nt(l.block);i=true},o(t){for(let t=0;t<3;t+=1){const e=l.blocks[t];it(e)}i=false},d(t){if(t)y(e);l.block.d(t);l.token=null;l=null}}}function ye(t){return{c:a,m:a,p:a,i:a,o:a,d:a}}function ve(t){let e;let n;let i;function l(e){t[9](e)}let s={data:t[11]};if(t[1]!==void 0){s.show=t[1]}e=new ue({props:s});F.push(()=>ct(e,"show",l));return{c(){ft(e.$$.fragment)},m(t,n){ut(e,t,n);i=true},p(t,i){const l={};if(i&4)l.data=t[11];if(!n&&i&2){n=true;l.show=t[1];W(()=>n=false)}e.$set(l)},i(t){if(i)return;nt(e.$$.fragment,t);i=true},o(t){it(e.$$.fragment,t);i=false},d(t){dt(e,t)}}}function je(t){return{c:a,m:a,p:a,i:a,o:a,d:a}}function ke(t){let e;let n;let i;let l;let s;let o;let r;let a;let c;let f;let u;let d;let p;let g;let h;let v;let k;let w;let E;let N;let M;let _;let T;let L;let C;let O;let H;let q;let z;let R;let S;let F;let B;let P;let Q;let U;a=new $e({props:{src:"[[admin/plugins/emoji:settings.parseAscii]]"}});g=new $e({props:{src:"[[admin/plugins/emoji:settings.parseNative]]"}});N=new $e({props:{src:"[[admin/plugins/emoji:settings.customFirst]]"}});C=new $e({props:{src:"[[admin/plugins/emoji:build]]"}});q=new $e({props:{src:"[[admin/plugins/emoji:build_description]]"}});let Y=t[2]&&be(t);return{c(){e=j("form");n=j("div");i=j("div");l=j("div");s=j("label");o=j("input");r=x();ft(a.$$.fragment);c=x();f=j("div");u=j("label");d=j("input");p=x();ft(g.$$.fragment);h=x();v=j("div");k=j("label");w=j("input");E=x();ft(N.$$.fragment);M=x();_=j("div");T=j("div");L=j("button");ft(C.$$.fragment);O=x();H=j("p");ft(q.$$.fragment);z=x();if(Y)Y.c();R=x();S=j("button");S.innerHTML=`<i class="material-icons">save</i>`;F=x();B=j("button");B.innerHTML=`<i class="material-icons">edit</i>`;I(o,"id","emoji-parseAscii");I(o,"type","checkbox");I(s,"for","emoji-parseAscii");I(l,"class","form-group");I(d,"id","emoji-parseNative");I(d,"type","checkbox");I(u,"for","emoji-parseNative");I(f,"class","form-group");I(w,"id","emoji-customFirst");I(w,"type","checkbox");I(k,"for","emoji-customFirst");I(v,"class","form-group");I(i,"class","panel-body");I(L,"type","button");I(L,"class","btn btn-primary");I(L,"aria-describedby","emoji-build_description");I(H,"id","emoji-build_description");I(H,"class","help-block");I(T,"class","form-group");I(_,"class","panel-footer");I(n,"class","panel panel-default");I(e,"id","emoji-settings");I(S,"class","floating-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored");I(B,"class","edit floating-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored svelte-rv4t0s")},m(m,y){b(m,e,y);$(e,n);$(n,i);$(i,l);$(l,s);$(s,o);o.checked=t[0].parseAscii;$(s,r);ut(a,s,null);$(i,c);$(i,f);$(f,u);$(u,d);d.checked=t[0].parseNative;$(u,p);ut(g,u,null);$(i,h);$(i,v);$(v,k);$(k,w);w.checked=t[0].customFirst;$(k,E);ut(N,k,null);$(n,M);$(n,_);$(_,T);$(T,L);ut(C,L,null);$(T,O);$(T,H);ut(q,H,null);b(m,z,y);if(Y)Y.m(m,y);b(m,R,y);b(m,S,y);b(m,F,y);b(m,B,y);P=true;if(!Q){U=[A(o,"change",t[6]),A(d,"change",t[7]),A(w,"change",t[8]),A(L,"click",t[4]),A(S,"click",t[3]),A(B,"click",t[5])];Q=true}},p(t,[e]){if(e&1){o.checked=t[0].parseAscii}if(e&1){d.checked=t[0].parseNative}if(e&1){w.checked=t[0].customFirst}if(t[2]){if(Y){Y.p(t,e);if(e&4){nt(Y,1)}}else{Y=be(t);Y.c();nt(Y,1);Y.m(R.parentNode,R)}}else if(Y){tt();it(Y,1,1,()=>{Y=null});et()}},i(t){if(P)return;nt(a.$$.fragment,t);nt(g.$$.fragment,t);nt(N.$$.fragment,t);nt(C.$$.fragment,t);nt(q.$$.fragment,t);nt(Y);P=true},o(t){it(a.$$.fragment,t);it(g.$$.fragment,t);it(N.$$.fragment,t);it(C.$$.fragment,t);it(q.$$.fragment,t);it(Y);P=false},d(t){if(t)y(e);dt(a);dt(g);dt(N);dt(C);dt(q);if(t)y(z);if(Y)Y.d(t);if(t)y(R);if(t)y(S);if(t)y(F);if(t)y(B);Q=false;m(U)}}}function xe(t,e,i){let{settings:l}=e;function s(){o["default"].put("/admin/plugins/emoji/settings",l).then(()=>ht.alertSuccess(),t=>ht.alertError(t))}function r(){o["default"].put("/admin/plugins/emoji/build",{}).then(()=>ht.alertSuccess(),t=>ht.alertError(t))}let a;let c;function f(){return o["default"].get("/admin/plugins/emoji/customizations",{})}function u(){i(2,c=c||Promise.all([f(),n.init()]).then(([t])=>t));c.then(()=>setTimeout(()=>a(),0))}function d(){l.parseAscii=this.checked;i(0,l)}function m(){l.parseNative=this.checked;i(0,l)}function p(){l.customFirst=this.checked;i(0,l)}function g(t){a=t;i(1,a)}t.$$set=(t=>{if("settings"in t)i(0,l=t.settings)});return[l,a,c,s,r,u,d,m,p,g]}class we extends gt{constructor(t){super();pt(this,t,xe,ke,g,{settings:0})}}s["default"](window).on("action:ajaxify.end",()=>{if(r.data.template["admin/plugins/emoji"]){new we({target:document.getElementById("content"),props:{settings:r.data.settings}})}})});
//# sourceMappingURL=admin.js.map