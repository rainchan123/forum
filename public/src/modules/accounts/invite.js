"use strict";define("accounts/invite",["api","benchpress","bootbox"],function(e,a,n){const t={};function i(){return ajaxify.data.template.name.startsWith("admin/")}t.handle=function(){$('[component="user/invite"]').on("click",function(s){s.preventDefault();e.get(`/api/v3/users/${app.user.uid}/invites/groups`,{}).then(e=>{a.parse("modals/invite",{groups:e},function(e){n.dialog({message:e,title:`[[${i?"admin/manage/users:invite":"users:invite"}]]`,onEscape:true,buttons:{cancel:{label:`[[${i?"admin/manage/users:alerts.button-cancel":"modules:bootbox.cancel"}]]`,className:"btn-default"},invite:{label:`[[${i?"admin/manage/users:invite":"users:invite"}]]`,className:"btn-primary",callback:t.send}}})})}).catch(e=>{app.alertError(e.message)})})};t.send=function(){var a=$("#invite-modal-emails");var n=$("#invite-modal-groups");var t={emails:a.val().split(",").map(e=>e.trim()).filter(Boolean).filter((e,a,n)=>a===n.indexOf(e)).join(","),groupsToJoin:n.val()};if(!t.emails){return}e.post(`/users/${app.user.uid}/invites`,t).then(()=>{app.alertSuccess(`[[${i?"admin/manage/users:alerts.email-sent-to":"users:invitation-email-sent"}, ${t.emails.replace(/,/g,"&#44; ")}]]`)}).catch(e=>{app.alertError(e.message)})};return t});
//# sourceMappingURL=invite.js.map