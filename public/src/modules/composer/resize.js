"use strict";define("composer/resize",["taskbar"],function(e){var t={};var o=0;var i=.3;var n=.05;var a=992;var r=$("body");var m=$(window);var u=$('[component="navbar"]');var s=document.documentElement;var d=document.body;var v=u[0];function c(){return localStorage.getItem("composer:resizeRatio")||.5}function f(e){localStorage.setItem("composer:resizeRatio",Math.min(e,1))}function h(){var e;if(v){e=v.getBoundingClientRect()}else{e={bottom:0}}var t=Math.max(e.bottom,0);var o={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};o.width=o.right;o.height=o.bottom;o.boundedTop=t;o.boundedHeight=o.bottom-t;return o}function l(t,o){var n=h();var r=t[0];var m=window.getComputedStyle(r);var u=parseInt(m.getPropertyValue("min-height"),10);var s=Math.max(u/window.innerHeight,i);if(n.width>=a){const e=(n.height-n.boundedHeight)/n.height;o=Math.min(Math.max(o,s+e),1);var v=o*n.boundedHeight/n.height;r.style.top=((1-v)*100).toString()+"%";var c=r.getBoundingClientRect();d.style.paddingBottom=(c.bottom-c.top).toString()+"px"}else{t.removeAttr("style");d.style.paddingBottom=0}t.ratio=o;r.style.visibility="visible";e.updateActive(t.attr("data-uuid"))}var g=l;var p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;if(p){g=function(e,t){p(function(){l(e,t);setTimeout(function(){m.trigger("action:composer.resize");e.trigger("action:composer.resize")},0)})}}t.reposition=function(e){var t=c();if(t>=1-n){t=1;e.addClass("maximized")}g(e,t)};t.maximize=function(e,o){if(o){g(e,1)}else{t.reposition(e)}};t.handleResize=function(e){var t=0;var i=0;var a=0;var u=e.find(".resizer");var s=u[0];function d(e){var o=s.getBoundingClientRect();var n=(o.top+o.bottom)/2;t=(n-e.clientY)/2;i=e.clientY;m.on("mousemove",v);m.on("mouseup",c);r.on("touchmove",l)}function v(o){var i=o.clientY-t;var n=h();var a=(n.height-i)/n.boundedHeight;g(e,a)}function c(u){u.preventDefault();a=u.clientY;e.find("textarea").focus();m.off("mousemove",v);m.off("mouseup",c);r.off("touchmove",l);var s=a-t;var d=h();var p=(d.height-s)/d.boundedHeight;if(a-i===0&&e.hasClass("maximized")){e.removeClass("maximized");p=!o||o>=1-n?.5:o;g(e,p)}else if(a-i===0||p>=1-n){g(e,1);e.addClass("maximized");o=p}else{e.removeClass("maximized")}f(p)}function l(e){e.preventDefault();v(e.touches[0])}u.on("mousedown",function(e){e.preventDefault();d(e)}).on("touchstart",function(e){e.preventDefault();d(e.touches[0])}).on("touchend",c)};return t});
//# sourceMappingURL=resize.js.map