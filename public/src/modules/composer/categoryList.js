"use strict";define("composer/categoryList",["categorySelector","taskbar"],function(e,t){var a={};var r;a.init=function(t,i){var n=t.find(".category-list-container");if(!n.length){return}t.on("action:composer.resize",function(){o(t)});socket.emit("plugins.composer.getCategoriesForSelect",{},function(s,d){if(s){return app.alertError(s.message)}a._map=d.reduce(function(e,t){e[t.cid]=t;return e},{});d.forEach(function(e){if(!e.disabledClass){$('<li data-cid="'+e.cid+'">'+e.name+"</li>").translateText(e.name).appendTo($(".category-selector"))}});a.updateTaskbar(t,i);app.parseAndTranslate("partials/category-selector",{categories:d,pullRight:false},function(a){n.append(a);r=e.init(n.find('[component="category-selector"]'),function(e){if(i.hasOwnProperty("cid")){c(t,i,e.cid)}});if(i.cid){r.selectCategory(i.cid)}var s=r.getSelectedCategory();t.find(".category-name").translateText(s?s.name:"[[modules:composer.select_category]]");t.find(".category-selector").find('li[data-cid="'+i.cid+'"]').addClass("active");o(t)})});$(".category-selector").on("click","li",function(){$(".category-name").text($(this).text());$(".category-selector").removeClass("open");$(".category-selector li").removeClass("active");$(this).addClass("active");var e=$(this).attr("data-cid");r.selectCategory(e);if(i.hasOwnProperty("cid")){c(t,i,e)}})};function o(e){e.find('.category-list-container [component="category-selector"]').toggleClass("dropup",e.outerHeight()<$(window).height()/2)}a.getSelectedCid=function(){var e;if(r){e=r.getSelectedCategory()}return e?e.cid:0};a.updateTaskbar=function(e,r){var o=e.attr("data-uuid");var c=a._map[r.cid];if(c){t.update("composer",o,{image:c.backgroundImage,"background-color":c.bgColor,icon:c.icon.slice(3)})}};function c(e,t,r){t.cid=r;require(["composer/tags"],function(a){a.onChangeCategory(e,t,r)});a.updateTaskbar(e,t)}return a});
//# sourceMappingURL=categoryList.js.map