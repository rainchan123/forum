"use strict";define("composer/autocomplete",["composer/preview"],function(e){var t={_active:{}};$(window).on("action:composer.discard",function(e,o){if(t._active.hasOwnProperty(o.post_uuid)){t._active[o.post_uuid].destroy();delete t._active[o.post_uuid]}});t.init=function(o,n){var r=o.find(".write");var i="composer-autocomplete-dropdown-"+n;var a;if(!r.length){return}var d={element:r,strategies:[],options:{style:{"z-index":2e4},className:i+" dropdown-menu textcomplete-dropdown"}};r.on("keyup",function(){clearTimeout(a);a=setTimeout(function(){var e=document.querySelector("."+i);var t=e.getBoundingClientRect();var o=parseFloat(e.style.marginTop,10)||0;var n=window.innerHeight+o-10-t.bottom;e.style.marginTop=Math.min(n,0)+"px"},0)});$(window).trigger("composer:autocomplete:init",d);t._active[n]=t.setup(d);d.element.on("textComplete:select",function(){e.render(o)})};t.setup=function(e){var t=e.element.get(0);if(!t){return}var o;if(t.nodeName==="TEXTAREA"){var n=window.Textcomplete.editors.Textarea;o=new n(t)}else if(t.nodeName==="DIV"&&t.getAttribute("contenteditable")==="true"){var r=window.Textcomplete.editors.ContentEditable;o=new r(t)}t.setAttribute("dir",document.querySelector("html").getAttribute("data-dir"));var i=new window.Textcomplete(o,{dropdown:e.options});i.register(e.strategies);i.on("rendered",function(){if(i.dropdown.items.length){i.dropdown.items[0].activate()}});return i};return t});
//# sourceMappingURL=autocomplete.js.map