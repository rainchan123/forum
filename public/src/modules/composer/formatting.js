"use strict";define("composer/formatting",["composer/controls","composer/preview","composer/resize","uploader","topicThumbs"],function(t,e,o,i,n){var s={};var r={picture:function(){var t=this;t.find("#files").click()},upload:function(){var t=this;t.find("#files").click()},thumbs:function(){var t=this;require(["composer"],function(e){const o=t.get(0).getAttribute("data-uuid");const i=e.posts[o];if(i.action==="topics.post"||i.action==="posts.edit"&&i.isMain){n.modal.open({id:o,pid:i.pid}).then(()=>{t.trigger("thumb.uploaded");e.updateThumbCount(o,t)})}})},tags:function(){var t=this;t.find(".tags-container").toggleClass("hidden")},zen:function(){var t=this;$(window).one("resize",function(){function e(){if(!screenfull.isFullscreen){app.toggleNavbar(true);$("html").removeClass("zen-mode");o.reposition(t);$(window).off("resize",e)}}if(screenfull.isFullscreen){app.toggleNavbar(false);$("html").addClass("zen-mode");t.find(".write").focus();$(window).on("resize",e);$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",screenfull.exit)}});screenfull.request(t.get(0))}};var a=[];s.addComposerButtons=function(){for(var t=0,e=a.length;t<e;t++){$(".formatting-bar .formatting-group #fileForm").before('<li tabindex="-1" data-format="'+a[t].name+'" title="'+(a[t].title||"")+'"><i class="'+a[t].iconClass+'"></i></li>')}};s.addButton=function(t,e,o,i){var i=i||t.replace("fa fa-","");r[i]=e;a.push({name:i,iconClass:t,title:o})};s.getDispatchTable=function(){return r};s.addButtonDispatch=function(t,e){r[t]=e};s.addHandler=function(t){t.on("click",".formatting-bar li",function(o){var i=$(this).attr("data-format"),n=$(this).parents('[component="composer"]').find("textarea")[0];if(r.hasOwnProperty(i)){r[i].call(t,n,n.selectionStart,n.selectionEnd,o);e.render(t)}})};return s});
//# sourceMappingURL=formatting.js.map