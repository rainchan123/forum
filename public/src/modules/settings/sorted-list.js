"use strict";define("settings/sorted-list",["benchpress","jquery-ui/widgets/sortable"],function(t){var a;var e;a={types:["sorted-list"],use:function(){e=this},set:function(t,a){var r=t.attr("data-sorted-list");a[r]=[];t.find('[data-type="item"]').each(function(t,i){var d=$(i).attr("data-sorted-list-uuid");var s=$('[data-sorted-list-object="'+r+'"][data-sorted-list-uuid="'+d+'"]');a[r].push(e.helper.serializeForm(s))})},get:function(a){var r=a.find('[data-type="list"]');var i=a.attr("data-sorted-list");var s=a.attr("data-form-template");t.render(s,{}).then(function(t){var r=$('[data-sorted-list="'+i+'"] [data-type="add"]');r.on("click",function(){var r=bootbox.confirm(t,function(t){if(t){var s=utils.generateUUID();var o=$('<form class="" data-sorted-list-uuid="'+s+'" data-sorted-list-object="'+i+'"></form>');o.append(r.find("form").children());$("#content").append(o.hide());var n=e.helper.serializeForm(o);d(a,s,n)}})});var s=ajaxify.data.settings[i];if(Array.isArray(s)&&typeof s[0]!=="string"){s.forEach(function(e){var r=utils.generateUUID();var s=$(t).deserialize(e);s.attr("data-sorted-list-uuid",r);s.attr("data-sorted-list-object",i);$("#content").append(s.hide());d(a,r,e)})}});r.sortable().addClass("pointer");$(window).trigger("action:settings.sorted-list.loaded",{element:r.get(0)})}};function r(t,a){var e=t.find('[data-sorted-list-uuid="'+a+'"] [data-type="remove"]');e.on("click",function(){console.log(a);$('[data-sorted-list-uuid="'+a+'"]').remove()})}function i(t,a){var d=t.find('[data-type="list"]');var s=t.attr("data-sorted-list");var o=t.attr("data-item-template");var n=$('[data-sorted-list-uuid="'+a+'"] [data-type="edit"]');n.on("click",function(){var n=$('[data-sorted-list-uuid="'+a+'"][data-sorted-list-object="'+s+'"]').clone(true).show();var l=bootbox.confirm(n,function(n){if(n){var u=$('<form class="" data-sorted-list-uuid="'+a+'" data-sorted-list-object="'+s+'"></form>');u.append(l.find("form").children());$("#content").find('[data-sorted-list-uuid="'+a+'"][data-sorted-list-object="'+s+'"]').remove();$("#content").append(u.hide());var c=e.helper.serializeForm(u);app.parseAndTranslate(o,c,function(e){e=$(e);var s=d.find('[data-sorted-list-uuid="'+a+'"]');s.after(e);s.remove();e.attr("data-sorted-list-uuid",a);r(t,a);i(t,a)})}})})}function d(t,a,e){var d=t.find('[data-type="list"]');var s=t.attr("data-item-template");app.parseAndTranslate(s,e,function(e){e=$(e);d.append(e);e.attr("data-sorted-list-uuid",a);r(t,a);i(t,a)})}return a});
//# sourceMappingURL=sorted-list.js.map