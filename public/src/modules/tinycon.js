(function(){var e={};var t=null;var r=null;var n=null;var i=null;var a={};var o=Math.ceil(window.devicePixelRatio)||1;var l=16*o;var f={width:7,height:9,font:10*o+"px arial",color:"#ffffff",background:"#F03D25",fallback:true,crossOrigin:true,abbreviate:true};var c=function(){var e=navigator.userAgent.toLowerCase();return function(t){return e.indexOf(t)!==-1}}();var u={ie:c("trident"),chrome:c("chrome"),webkit:c("chrome")||c("safari"),safari:c("safari")&&!c("chrome"),mozilla:c("mozilla")&&!c("chrome")&&!c("safari")};var v=function(){var e=document.getElementsByTagName("link");for(var t=0,r=e.length;t<r;t++){if((e[t].getAttribute("rel")||"").match(/\bicon\b/i)){return e[t]}}return false};var d=function(){var e=document.getElementsByTagName("link");for(var t=0,r=e.length;t<r;t++){var n=typeof e[t]!=="undefined";if(n&&(e[t].getAttribute("rel")||"").match(/\bicon\b/i)){e[t].parentNode.removeChild(e[t])}}};var s=function(){if(!r||!t){var e=v();t=e?e.getAttribute("href"):"/favicon.ico";if(!r){r=t}}return t};var m=function(){if(!i){i=document.createElement("canvas");i.width=l;i.height=l}return i};var h=function(e){if(e){d();var t=document.createElement("link");t.type="image/x-icon";t.rel="icon";t.href=e;document.getElementsByTagName("head")[0].appendChild(t)}};var g=function(e){if(window.console)window.console.log(e)};var b=function(e,t){if(!m().getContext||u.ie||u.safari||a.fallback==="force"){return w(e)}var r=m().getContext("2d");var t=t||"#000000";var i=s();n=document.createElement("img");n.onload=function(){r.clearRect(0,0,l,l);r.drawImage(n,0,0,n.width,n.height,0,0,l,l);if((e+"").length>0)k(r,e,t);y()};if(!i.match(/^data/)&&a.crossOrigin){n.crossOrigin="anonymous"}n.src=i};var w=function(e){if(a.fallback){var t=document.title;if(t[0]==="("){t=t.slice(t.indexOf(" "))}if((e+"").length>0){document.title="("+e+") "+t}else{document.title=t}}};var k=function(e,t,r){if(typeof t=="number"&&t>99&&a.abbreviate){t=T(t)}var n=(t+"").length-1;var i=a.width*o+6*o*n,f=a.height*o;var c=l-f,v=l-i-o,d=16*o,s=16*o,m=2*o;e.font=(u.webkit?"bold ":"")+a.font;e.fillStyle=a.background;e.strokeStyle=a.background;e.lineWidth=o;e.beginPath();e.moveTo(v+m,c);e.quadraticCurveTo(v,c,v,c+m);e.lineTo(v,d-m);e.quadraticCurveTo(v,d,v+m,d);e.lineTo(s-m,d);e.quadraticCurveTo(s,d,s,d-m);e.lineTo(s,c+m);e.quadraticCurveTo(s,c,s-m,c);e.closePath();e.fill();e.beginPath();e.strokeStyle="rgba(0,0,0,0.3)";e.moveTo(v+m/2,d);e.lineTo(s-m/2,d);e.stroke();e.fillStyle=a.color;e.textAlign="right";e.textBaseline="top";e.fillText(t,o===2?29:15,u.mozilla?7*o:6*o)};var y=function(){if(!m().getContext)return;h(m().toDataURL())};var T=function(e){var t=[["G",1e9],["M",1e6],["k",1e3]];for(var r=0;r<t.length;++r){if(e>=t[r][1]){e=p(e/t[r][1])+t[r][0];break}}return e};var p=function(e,t){var r=new Number(e);return r.toFixed(t)};e.setOptions=function(e){a={};if(e.colour){e.color=e.colour}for(var t in f){a[t]=e.hasOwnProperty(t)?e[t]:f[t]}return this};e.setImage=function(e){t=e;y();return this};e.setBubble=function(e,t){e=e||"";b(e,t);return this};e.reset=function(){t=r;h(r)};e.setOptions(f);if(typeof define==="function"&&define.amd){define(e)}else if(typeof module!=="undefined"){module.exports=e}else{window.Tinycon=e}})();
//# sourceMappingURL=tinycon.js.map