(function(i){if(typeof define==="function"&&define.amd){define(["jquery","./button","./draggable","./mouse","./resizable","../focusable","../keycode","../position","../safe-active-element","../safe-blur","../tabbable","../unique-id","../version","../widget"],i)}else{i(jQuery)}})(function(i){i.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,closeText:"Close",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=i(this).css(t).offset().top;if(e<0){i(this).css("top",t.top-e)}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");if(this.options.title==null&&this.originalTitle!=null){this.options.title=this.originalTitle}if(this.options.disabled){this.options.disabled=false}this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();if(this.options.draggable&&i.fn.draggable){this._makeDraggable()}if(this.options.resizable&&i.fn.resizable){this._makeResizable()}this._isOpen=false;this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var t=this.options.appendTo;if(t&&(t.jquery||t.nodeType)){return i(t)}return this.document.find(t||"body").eq(0)},_destroy:function(){var i,t=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}i=t.parent.children().eq(t.index);if(i.length&&i[0]!==this.element[0]){i.before(this.element)}else{t.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:i.noop,enable:i.noop,close:function(t){var e=this;if(!this._isOpen||this._trigger("beforeClose",t)===false){return}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").trigger("focus").length){i.ui.safeBlur(i.ui.safeActiveElement(this.document[0]))}this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var s=false,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+i(this).css("z-index")}).get(),n=Math.max.apply(null,o);if(n>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",n+1);s=true}if(s&&!e){this._trigger("focus",t)}return s},open:function(){var t=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true;this.opener=i(i.ui.safeActiveElement(this.document[0]));this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)}this._show(this.uiDialog,this.options.show,function(){t._focusTabbable();t._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var i=this._focusedElement;if(!i){i=this.element.find("[autofocus]")}if(!i.length){i=this.element.find(":tabbable")}if(!i.length){i=this.uiDialogButtonPane.find(":tabbable")}if(!i.length){i=this.uiDialogTitlebarClose.filter(":tabbable")}if(!i.length){i=this.uiDialog}i.eq(0).trigger("focus")},_keepFocus:function(t){function e(){var t=i.ui.safeActiveElement(this.document[0]),e=this.uiDialog[0]===t||i.contains(this.uiDialog[0],t);if(!e){this._focusTabbable()}}t.preventDefault();e.call(this);this._delay(e)},_createWrapper:function(){this.uiDialog=i("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===i.ui.keyCode.ESCAPE){t.preventDefault();this.close(t);return}if(t.keyCode!==i.ui.keyCode.TAB||t.isDefaultPrevented()){return}var e=this.uiDialog.find(":tabbable"),s=e.filter(":first"),o=e.filter(":last");if((t.target===o[0]||t.target===this.uiDialog[0])&&!t.shiftKey){this._delay(function(){s.trigger("focus")});t.preventDefault()}else if((t.target===s[0]||t.target===this.uiDialog[0])&&t.shiftKey){this._delay(function(){o.trigger("focus")});t.preventDefault()}},mousedown:function(i){if(this._moveToTop(i)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var t;this.uiDialogTitlebar=i("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(t){if(!i(t.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.trigger("focus")}}});this.uiDialogTitlebarClose=i("<button type='button'></button>").button({label:i("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(i){i.preventDefault();this.close(i)}});t=i("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(t,"ui-dialog-title");this._title(t);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(i){if(this.options.title){i.text(this.options.title)}else{i.html("&#160;")}},_createButtonPane:function(){this.uiDialogButtonPane=i("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=i("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var t=this,e=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(i.isEmptyObject(e)||i.isArray(e)&&!e.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}i.each(e,function(e,s){var o,n;s=i.isFunction(s)?{click:s,text:e}:s;s=i.extend({type:"button"},s);o=s.click;n={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel,icons:s.icons,text:s.text};delete s.click;delete s.icon;delete s.iconPosition;delete s.showLabel;delete s.icons;if(typeof s.text==="boolean"){delete s.text}i("<button></button>",s).button(n).appendTo(t.uiButtonSet).on("click",function(){o.apply(t.element[0],arguments)})});this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var t=this,e=this.options;function s(i){return{position:i.position,offset:i.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,o){t._addClass(i(this),"ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",e,s(o))},drag:function(i,e){t._trigger("drag",i,s(e))},stop:function(o,n){var a=n.offset.left-t.document.scrollLeft(),l=n.offset.top-t.document.scrollTop();e.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" "+"top"+(l>=0?"+":"")+l,of:t.window};t._removeClass(i(this),"ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",o,s(n))}})},_makeResizable:function(){var t=this,e=this.options,s=e.resizable,o=this.uiDialog.css("position"),n=typeof s==="string"?s:"n,e,s,w,se,sw,ne,nw";function a(i){return{originalPosition:i.originalPosition,originalSize:i.originalSize,position:i.position,size:i.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:this._minHeight(),handles:n,start:function(e,s){t._addClass(i(this),"ui-dialog-resizing");t._blockFrames();t._trigger("resizeStart",e,a(s))},resize:function(i,e){t._trigger("resize",i,a(e))},stop:function(s,o){var n=t.uiDialog.offset(),l=n.left-t.document.scrollLeft(),u=n.top-t.document.scrollTop();e.height=t.uiDialog.height();e.width=t.uiDialog.width();e.position={my:"left top",at:"left"+(l>=0?"+":"")+l+" "+"top"+(u>=0?"+":"")+u,of:t.window};t._removeClass(i(this),"ui-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",s,a(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget();this._focusedElement=i(t.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=i.inArray(this,t);if(e!==-1){t.splice(e,1)}},_trackingInstances:function(){var i=this.document.data("ui-dialog-instances");if(!i){i=[];this.document.data("ui-dialog-instances",i)}return i},_minHeight:function(){var i=this.options;return i.height==="auto"?i.minHeight:Math.min(i.minHeight,i.height)},_position:function(){var i=this.uiDialog.is(":visible");if(!i){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!i){this.uiDialog.hide()}},_setOptions:function(t){var e=this,s=false,o={};i.each(t,function(i,t){e._setOption(i,t);if(i in e.sizeRelatedOptions){s=true}if(i in e.resizableRelatedOptions){o[i]=t}});if(s){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",o)}},_setOption:function(t,e){var s,o,n=this.uiDialog;if(t==="disabled"){return}this._super(t,e);if(t==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(t==="buttons"){this._createButtons()}if(t==="closeText"){this.uiDialogTitlebarClose.button({label:i("<a>").text(""+this.options.closeText).html()})}if(t==="draggable"){s=n.is(":data(ui-draggable)");if(s&&!e){n.draggable("destroy")}if(!s&&e){this._makeDraggable()}}if(t==="position"){this._position()}if(t==="resizable"){o=n.is(":data(ui-resizable)");if(o&&!e){n.resizable("destroy")}if(o&&typeof e==="string"){n.resizable("option","handles",e)}if(!o&&e!==false){this._makeResizable()}}if(t==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}},_size:function(){var i,t,e,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(s.minWidth>s.width){s.width=s.minWidth}i=this.uiDialog.css({height:"auto",width:s.width}).outerHeight();t=Math.max(0,s.minHeight-i);e=typeof s.maxHeight==="number"?Math.max(0,s.maxHeight-i):"none";if(s.height==="auto"){this.element.css({minHeight:t,maxHeight:e,height:"auto"})}else{this.element.height(Math.max(0,s.height-i))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=i(this);return i("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(t){if(i(t.target).closest(".ui-dialog").length){return true}return!!i(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var t=true;this._delay(function(){t=false});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function(i){if(t){return}if(!this._allowInteraction(i)){i.preventDefault();this._trackingInstances()[0]._focusTabbable()}}})}this.overlay=i("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){var i=this.document.data("ui-dialog-overlays")-1;if(!i){this._off(this.document,"focusin");this.document.removeData("ui-dialog-overlays")}else{this.document.data("ui-dialog-overlays",i)}this.overlay.remove();this.overlay=null}}});if(i.uiBackCompat!==false){i.widget("ui.dialog",i.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(i,t){if(i==="dialogClass"){this.uiDialog.removeClass(this.options.dialogClass).addClass(t)}this._superApply(arguments)}})}return i.ui.dialog});
//# sourceMappingURL=dialog.js.map