"use strict";define("alerts",["translator","components"],function(t,e){var n={};n.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:(new Date).getTime());t.title=t.title?t.title.trim()||"":"";t.message=t.message?t.message.trim():"";t.type=t.type||"info";var e=$("#"+t.alert_id);if(e.length){a(e,t)}else{i(t)}};function i(t){app.parseAndTranslate("alert",t,function(n){var i=$("#"+t.alert_id);if(i.length){return a(i,t)}i=n;i.fadeIn(200);e.get("toaster/tray").prepend(i);if(typeof t.closefn==="function"){i.find("button").on("click",function(){t.closefn();r(i);return false})}if(t.timeout){o(i,t)}if(typeof t.clickfn==="function"){i.addClass("pointer").on("click",function(e){if(!$(e.target).is(".close")){t.clickfn(i,t)}r(i)})}$(window).trigger("action:alert.new",{alert:i,params:t})})}n.remove=function(t){$("#alert_button_"+t).remove()};function a(e,n){e.find("strong").html(n.title);e.find("p").html(n.message);e.attr("class","alert alert-dismissable alert-"+n.type+" clearfix");clearTimeout(parseInt(e.attr("timeoutId"),10));if(n.timeout){o(e,n)}e.children().fadeOut(100);t.translate(e.html(),function(t){e.children().fadeIn(100);e.html(t);$(window).trigger("action:alert.update",{alert:e,params:n})});e.off("click").removeClass("pointer");if(typeof n.clickfn==="function"){e.addClass("pointer").on("click",function(t){if(!$(t.target).is(".close")){n.clickfn()}r(e)})}}function r(t){t.fadeOut(500,function(){$(this).remove()})}function o(t,e){var n=e.timeout;var i=setTimeout(function(){r(t);if(typeof e.timeoutfn==="function"){e.timeoutfn(t,e)}},n);t.attr("timeoutId",i);t.css("transition-property","none");t.removeClass("animate");setTimeout(function(){t.css("transition-property","");t.css("transition","width "+(n+450)+"ms linear, background-color "+(n+450)+"ms ease-in");t.addClass("animate")},50);t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return n});
//# sourceMappingURL=alerts.js.map