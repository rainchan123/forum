"use strict";define("forum/account/blocks",["forum/account/header","api"],function(e,t){var a={};a.init=function(){e.init();$("#user-search").on("keyup",function(){var e=this.value;t.get("/api/users",{query:e,searchBy:"username",paginate:false},function(e,t){if(e){return app.alertError(e.message)}if(t.matchCount>10){t.users.length=10}app.parseAndTranslate("account/blocks","edit",{edit:t.users},function(e){$(".block-edit").html(e)})})});$(".block-edit").on("click",'[data-action="toggle"]',function(){var e=parseInt(this.getAttribute("data-uid"),10);socket.emit("user.toggleBlock",{blockeeUid:e,blockerUid:ajaxify.data.uid},a.refreshList)})};a.refreshList=function(e){if(e){return app.alertError(e.message)}$.get(config.relative_path+"/api/"+ajaxify.currentPage).done(function(e){app.parseAndTranslate("account/blocks","users",e,function(e){$("#users-container").html(e);$("#users-container").siblings("div.alert")[e.length?"hide":"show"]()});$(window).trigger("action:user.blocks.toggle",{data:e})}).fail(function(){ajaxify.go(ajaxify.currentPage)})};return a});
//# sourceMappingURL=blocks.js.map