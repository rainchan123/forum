"use strict";define("forum/topic/delete-posts",["components","postSelect"],function(t,e){var i={};var n;var o;var a;var s;i.init=function(){s=ajaxify.data.tid;$(window).off("action:ajaxify.end",d).on("action:ajaxify.end",d);if(n){return}app.parseAndTranslate("partials/delete_posts_modal",{},function(t){n=t;$("body").append(n);o=n.find("#delete_posts_confirm");a=n.find("#purge_posts_confirm");n.find(".close,#delete_posts_cancel").on("click",l);e.init(function(){c();f()});f();o.on("click",function(){r(o,"posts.deletePosts")});a.on("click",function(){r(a,"posts.purgePosts")})})};function d(){if(ajaxify.data.template.name!=="topic"||ajaxify.data.tid!==s){l();$(window).off("action:ajaxify.end",d)}}function r(t,i){t.attr("disabled",true);socket.emit(i,{pids:e.pids},function(e){t.removeAttr("disabled");if(e){return app.alertError(e.message)}l()})}function f(){if(e.pids.length){n.find("#pids").translateHtml("[[topic:fork_pid_count, "+e.pids.length+"]]")}else{n.find("#pids").translateHtml("[[topic:fork_no_pids]]")}}function c(){if(e.pids.length){o.removeAttr("disabled");a.removeAttr("disabled")}else{o.attr("disabled",true);a.attr("disabled",true)}}function l(){if(n){n.remove();n=null;e.disable()}}return i});
//# sourceMappingURL=delete-posts.js.map