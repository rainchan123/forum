"use strict";define("forum/infinitescroll",function(){var o={};var e;var r=0;var i=false;var t;var n=0;o.init=function(o,i){if(typeof o==="function"){e=o;t=$("body")}else{e=i;t=o||$("body")}r=$(window).scrollTop();$(window).off("scroll",a).on("scroll",a)};function a(){if(n){clearTimeout(n)}n=setTimeout(function(){n=0;f()},60)}function f(){var o=utils.findBootstrapEnvironment();var n=(o==="xs"||o==="sm")&&$("html").hasClass("composing");if(i||n){return}var a=$(window).scrollTop();var f=$(window).height();var l=t.height()-f;var s=t.offset()?t.offset().top:0;var c=100*(a-s)/(l<=0?f:l);var v=15;var u=85;var d=a>r?1:-1;if(c<v&&a<r){e(d)}else if(c>u&&a>r){e(d)}else if(c<0&&d>0&&l<0){e(d)}r=a}o.loadMore=function(o,e,r){if(i){return}i=true;var t={method:o,data:e};$(window).trigger("action:infinitescroll.loadmore",t);socket.emit(t.method,t.data,function(o,e){if(o){i=false;return app.alertError(o.message)}r(e,function(){i=false})})};o.removeExtra=function(o,e,r){if(o.length<=r){return}var i=o.length-r;if(e>0){var t=$(document).height();var n=$(window).scrollTop();o.slice(0,i).remove();$(window).scrollTop(n+($(document).height()-t))}else{o.slice(o.length-i).remove()}};return o});
//# sourceMappingURL=infinitescroll.js.map