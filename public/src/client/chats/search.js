"use strict";define("forum/chats/search",["components","api"],function(e,t){var r={};r.init=function(){var t=0;e.get("chat/search").on("keyup",function(){if(t){clearTimeout(t);t=0}t=setTimeout(n,250)})};function n(){var r=e.get("chat/search").val();if(!r){return $('[component="chat/search/list"]').empty()}t.get("/api/users",{query:r,searchBy:"username",paginate:false}).then(a).catch(app.alertError)}function a(e){var t=$('[component="chat/search/list"]');t.empty();e.users=e.users.filter(function(e){return parseInt(e.uid,10)!==parseInt(app.user.uid,10)});if(!e.users.length){return t.translateHtml("<li><div><span>[[users:no-users-found]]</span></div></li>")}e.users.forEach(function(e){var r=s(t,e);i(r,e)});t.parent().toggleClass("open",true)}function s(e,t){function r(){return(t.picture?'<img src="'+t.picture+'" title="'+t.username+'" />':'<div class="user-icon" style="background-color: '+t["icon:bgColor"]+'">'+t["icon:text"]+"</div>")+'<i class="fa fa-circle status '+t.status+'"></i> '+t.username}var n=$('<li component="chat/search/user"></li>').attr("data-uid",t.uid).appendTo(e);n.append(r());return n}function i(e,t){e.on("click",function(){socket.emit("modules.chats.hasPrivateChat",t.uid,function(e,r){if(e){return app.alertError(e.message)}if(r){require(["forum/chats"],function(e){e.switchChat(r)})}else{app.newChat(t.uid)}})})}return r});
//# sourceMappingURL=search.js.map