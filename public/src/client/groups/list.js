"use strict";define("forum/groups/list",["forum/infinitescroll","benchpress","api"],function(r,t,e){var o={};o.init=function(){r.init(o.loadMoreGroups);$('button[data-action="new"]').on("click",function(){bootbox.prompt("[[groups:new-group.group_name]]",function(r){if(r&&r.length){e.post("/groups",{name:r}).then(r=>{ajaxify.go("groups/"+r.slug)}).catch(app.alertError)}})});var t=utils.params();$("#search-sort").val(t.sort||"alpha");$("#search-text").on("keyup",o.search);$("#search-button").on("click",o.search);$("#search-sort").on("change",function(){ajaxify.go("groups?sort="+$("#search-sort").val())})};o.loadMoreGroups=function(e){if(e<0){return}r.loadMore("groups.loadMore",{sort:$("#search-sort").val(),after:$('[component="groups/container"]').attr("data-nextstart")},function(r,e){if(r&&r.groups.length){t.render("partials/groups/list",{groups:r.groups}).then(function(r){$("#groups-list").append(r);e()})}else{e()}if(r&&r.nextStart){$('[component="groups/container"]').attr("data-nextstart",r.nextStart)}})};o.search=function(){var r=$("#groups-list");var e=$("#search-text");var o=$("#search-sort");socket.emit("groups.search",{query:e.val(),options:{sort:o.val(),filterHidden:true,showMembers:true,hideEphemeralGroups:true}},function(e,o){if(e){return app.alertError(e.message)}o=o.filter(function(r){return r.name!=="registered-users"&&r.name!=="guests"});t.render("partials/groups/list",{groups:o}).then(function(t){r.empty().append(t)})});return false};return o});
//# sourceMappingURL=list.js.map