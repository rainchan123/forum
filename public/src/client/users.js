"use strict";define("forum/users",["translator","benchpress","api","accounts/invite"],function(e,n,a,s){var t={};var i=0;var r=0;$(window).on("action:ajaxify.start",function(){if(i){clearTimeout(i);i=0}});t.init=function(){app.enterRoom("user_list");var e=utils.params().section?"?section="+utils.params().section:"";$(".nav-pills li").removeClass("active").find('a[href="'+window.location.pathname+e+'"]').parent().addClass("active");t.handleSearch();s.handle();socket.removeListener("event:user_status_change",l);socket.on("event:user_status_change",l)};t.handleSearch=function(e){r=e&&e.resultCount;i=0;$("#search-user").on("keyup",function(){if(i){clearTimeout(i);i=0}i=setTimeout(o,250)});$('.search select, .search input[type="checkbox"]').on("change",function(){o()})};function o(){$('[component="user/search/icon"]').removeClass("fa-search").addClass("fa-spinner fa-spin");var e=$("#search-user").val();var n=h();var a={section:n,page:1};if(!e){return c(a)}a.query=e;a.sortBy=u();var s=[];if($(".search .online-only").is(":checked")||n==="online"){s.push("online")}if(n==="banned"){s.push("banned")}if(n==="flagged"){s.push("flagged")}if(s.length){a.filters=s}c(a)}function u(){var e;var n=h();if(n==="sort-posts"){e="postcount"}else if(n==="sort-reputation"){e="reputation"}else if(n==="users"){e="joindate"}return e}function c(e){a.get("/api/users",e).then(p).catch(app.alertError)}function p(e){n.render("partials/paginator",{pagination:e.pagination}).then(function(e){$(".pagination-container").replaceWith(e)});if(r){e.users=e.users.slice(0,r)}e.isAdminOrGlobalMod=app.user.isAdmin||app.user.isGlobalMod;app.parseAndTranslate("users","users",e,function(e){$("#users-container").html(e);e.find("span.timeago").timeago();$('[component="user/search/icon"]').addClass("fa-search").removeClass("fa-spinner fa-spin")})}function l(e){var n=h();if(n.startsWith("online")||n.startsWith("users")){f(e)}}function f(e){app.updateUserStatus($('#users-container [data-uid="'+e.uid+'"] [component="user/status"]'),e.status)}function h(){return utils.params().section||""}return t});
//# sourceMappingURL=users.js.map